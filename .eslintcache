[{"/Users/surabhigovil/file_storage/src/index.js":"1","/Users/surabhigovil/file_storage/src/aws-exports.js":"2","/Users/surabhigovil/file_storage/src/App.js":"3","/Users/surabhigovil/file_storage/src/reportWebVitals.js":"4","/Users/surabhigovil/file_storage/src/UserFiles.js":"5","/Users/surabhigovil/file_storage/src/graphql/mutations.js":"6","/Users/surabhigovil/file_storage/src/graphql/queries.js":"7","/Users/surabhigovil/file_storage/src/Users.js":"8","/Users/surabhigovil/file_storage/src/graphql/subscriptions.js":"9","/Users/surabhigovil/file_storage/src/CreateDoc.js":"10"},{"size":597,"mtime":1607106125902,"results":"11","hashOfConfig":"12"},{"size":799,"mtime":1607113475276,"results":"13","hashOfConfig":"12"},{"size":179,"mtime":1607108340360,"results":"14","hashOfConfig":"12"},{"size":362,"mtime":1607065115053,"results":"15","hashOfConfig":"12"},{"size":2641,"mtime":1607072467327,"results":"16","hashOfConfig":"12"},{"size":3172,"mtime":1607113471711,"results":"17","hashOfConfig":"12"},{"size":2032,"mtime":1607113471635,"results":"18","hashOfConfig":"12"},{"size":5479,"mtime":1607116243467,"results":"19","hashOfConfig":"12"},{"size":2326,"mtime":1607113471780,"results":"20","hashOfConfig":"12"},{"size":4522,"mtime":1607106097023,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1u3zevm",{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"30"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/surabhigovil/file_storage/src/index.js",[],"/Users/surabhigovil/file_storage/src/aws-exports.js",[],"/Users/surabhigovil/file_storage/src/App.js",["44"],"/Users/surabhigovil/file_storage/src/reportWebVitals.js",[],["45","46"],"/Users/surabhigovil/file_storage/src/UserFiles.js",["47","48"],"import React, { useState, useReducer, useEffect } from 'react'\nimport { AmplifySignOut, withAuthenticator } from '@aws-amplify/ui-react';\nimport Amplify, {Auth, Storage, API, graphqlOperation } from 'aws-amplify'\nimport { v4 as uuid } from 'uuid'\n\nimport { createUserFiles as CreateUserFiles } from './graphql/mutations'\nimport { listUserFiless as ListUserFiles } from './graphql/queries'\nimport config from './aws-exports'\n\nAmplify.configure(config);\n\nconst {\n  aws_user_files_s3_bucket_region: region,\n  aws_user_files_s3_bucket: bucket\n} = config\n\nfunction App() {\n  const [file, updateFile] = useState(null)\n  const [fileName, updateFileName] = useState('')\n  const [files, updateFiles] = useState([])\n  useEffect(() => {\n    listUserFiles()\n  }, [])\n  \n  async function listUserFiles() {\n    const files = await API.graphql(graphqlOperation(ListUserFiles))\n    updateFiles(files.data.listUserFiless.items)\n  }\n\n  function handleChange(event) {\n    const { target: { value, files } } = event\n    const fileForUpload = files[0]\n    updateFileName(fileForUpload.name[0])\n    updateFile(fileForUpload || value)\n  }\n\n  async function createUserFiles(event) {\n    event.preventDefault()\n    if (file) {\n      const extension = file.name.split(\".\")[1]\n      const { type: mimeType } = file\n      const key = `images/${uuid()}${fileName}.${extension}`      \n      const url = `https://${bucket}.s3.${region}.amazonaws.com/public/${key}`\n      const inputData = { name: fileName , image: url }\n      \n      try {\n        await Storage.put(key, file, {\n          contentType: mimeType\n        })\n        await API.graphql(graphqlOperation(CreateUserFiles, { input: inputData }))\n        console.log('successfully created file!')\n      } catch (err) {\n        console.log('error: ', err)\n      }\n    }\n  }\n\n  return (\n    <div style={styles.container}>\n      <input\n        type=\"file\"\n        onChange={handleChange}\n        style={{margin: '10px 0px'}}\n      />\n      <input\n        placeholder='File Name'\n        value={fileName}\n        onChange={e => updateFileName(e.target.value)}\n      />\n      <button\n        style={styles.button}\n        onClick={createUserFiles}>Create File</button>\n\n      {\n        files.map((p, i) => (\n          <p>{p.name}</p>\n        ))\n      }\n      <AmplifySignOut />\n    </div>\n  );\n}\n\nconst styles = {\n  container: {\n    width: 400,\n    margin: '0 auto',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  image: {\n    width: 400\n  },\n  button: {\n    width: 200,\n    backgroundColor: '#ddd',\n    cursor: 'pointer',\n    height: 30,\n    margin: '0px 0px 8px'\n  }\n}\n\nexport default withAuthenticator(App);","/Users/surabhigovil/file_storage/src/graphql/mutations.js",[],"/Users/surabhigovil/file_storage/src/graphql/queries.js",[],"/Users/surabhigovil/file_storage/src/Users.js",["49","50","51","52","53","54"],"/Users/surabhigovil/file_storage/src/graphql/subscriptions.js",[],"/Users/surabhigovil/file_storage/src/CreateDoc.js",["55","56","57","58","59"],{"ruleId":"60","severity":1,"message":"61","line":3,"column":8,"nodeType":"62","messageId":"63","endLine":3,"endColumn":17},{"ruleId":"64","replacedBy":"65"},{"ruleId":"66","replacedBy":"67"},{"ruleId":"60","severity":1,"message":"68","line":1,"column":27,"nodeType":"62","messageId":"63","endLine":1,"endColumn":37},{"ruleId":"60","severity":1,"message":"69","line":3,"column":18,"nodeType":"62","messageId":"63","endLine":3,"endColumn":22},{"ruleId":"60","severity":1,"message":"70","line":3,"column":8,"nodeType":"62","messageId":"63","endLine":3,"endColumn":15},{"ruleId":"60","severity":1,"message":"71","line":7,"column":21,"nodeType":"62","messageId":"63","endLine":7,"endColumn":30},{"ruleId":"60","severity":1,"message":"72","line":22,"column":7,"nodeType":"62","messageId":"63","endLine":22,"endColumn":11},{"ruleId":"60","severity":1,"message":"73","line":44,"column":10,"nodeType":"62","messageId":"63","endLine":44,"endColumn":17},{"ruleId":"74","severity":1,"message":"75","line":131,"column":6,"nodeType":"76","endLine":131,"endColumn":8,"suggestions":"77"},{"ruleId":"78","severity":1,"message":"79","line":171,"column":7,"nodeType":"80","endLine":174,"endColumn":9},{"ruleId":"60","severity":1,"message":"81","line":37,"column":12,"nodeType":"62","messageId":"63","endLine":37,"endColumn":17},{"ruleId":"60","severity":1,"message":"82","line":37,"column":19,"nodeType":"62","messageId":"63","endLine":37,"endColumn":30},{"ruleId":"60","severity":1,"message":"83","line":73,"column":15,"nodeType":"62","messageId":"63","endLine":73,"endColumn":24},{"ruleId":"60","severity":1,"message":"84","line":77,"column":15,"nodeType":"62","messageId":"63","endLine":77,"endColumn":18},{"ruleId":"78","severity":1,"message":"79","line":136,"column":7,"nodeType":"80","endLine":139,"endColumn":9},"no-unused-vars","'CreateDoc' is defined but never used.","Identifier","unusedVar","no-native-reassign",["85"],"no-negated-in-lhs",["86"],"'useReducer' is defined but never used.","'Auth' is defined but never used.","'Amplify' is defined but never used.","'listFiles' is defined but never used.","'user' is assigned a value but never used.","'myFiles' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getLoggedInUserFiles'. Either include it or remove the dependency array.","ArrayExpression",["87"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'files' is assigned a value but never used.","'updateFiles' is assigned a value but never used.","'extension' is assigned a value but never used.","'url' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"88","fix":"89"},"Update the dependencies array to be: [getLoggedInUserFiles]",{"range":"90","text":"91"},[4099,4101],"[getLoggedInUserFiles]"]